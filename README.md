# Sudoku

Cloneはシャーロコピーで参照をコピーしますよね？なぜ元の配列が操作されないのですか？


ChatGPT:
いい質問です。
Clone() は確かに シャローコピー（shallow copy）なんですが、
**多次元配列の場合は「配列本体」まで新しく作られる」**ので、
結果として元の配列は操作されません。

 詳細解説
1. シャローコピーとは
シャローコピーは「中の要素まではコピーせず、参照をコピーする」方式です。
例えば object[] のように参照型の配列なら、Clone() しても中の参照は共有します。

2. じゃあなぜ int[,] では元の配列に影響しない？
int は値型（struct）なので、中の要素自体が実際の値を持っています。
さらに、int[,] の場合は Clone() すると「新しい配列領域」が作られ、
その新しい配列に 値型の要素 が丸ごとコピーされます。

つまり：

元の配列とコピー後の配列は別物（領域が別）

値型は参照じゃなく実体コピーなのでリンクしていない

だからコピー先を変更しても元には影響しない

図解
元の配列
cpp
コピーする
編集する
qGrid (int[,])
 ├─ [0,0] = 5
 ├─ [0,1] = 3
 ...
Clone() 後
go
コピーする
編集する
copy (int[,])
 ├─ [0,0] = 5  // 値そのものがコピーされている
 ├─ [0,1] = 3
 ...
この時点で qGrid と copy は全く別の配列オブジェクトです。
なので copy[0,0] = 9 としても qGrid の中身は変わりません。

 注意点
もし Clone() する対象が object[,] や List<int>[,] のような参照型の配列だったら、

配列本体は別物になる

でも中の参照先は共有している
ので、参照型の要素を変更すれば元の配列にも影響します。

つまり今回の場合は：

int[,] は値型

Clone() は配列本体を新規作成
なので、完全に独立したコピーになるというわけです。